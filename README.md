# 🎮 アキネイター - 動的学習システム

Pythonで実装された、遊ぶほど賢くなるアキネイターゲームです。

## 📝 概要

このプロジェクトは、ベイズ推定と情報エントロピーを用いた推論エンジンを搭載した対話型推測ゲームです。
ユーザーが思い浮かべた動物を質問を通じて当てるだけでなく、間違えた場合には新しい知識を学習して賢くなっていきます。

## ✨ 特徴

- **動的学習**: ゲームをプレイするたびに新しいエンティティと質問を学習
- **ベイズ推定**: 科学的な確率論に基づいた推論
- **情報エントロピー**: 最も効率的な質問を自動選択
- **日本語対応**: 完全日本語インターフェース
- **外部依存なし**: Python標準ライブラリのみで動作

## 🚀 遊び方

### 実行方法

```bash
python main.py
```

### ゲームの流れ

1. **思い浮かべる**: 何か動物を思い浮かべてください
2. **質問に回答**: システムが質問するので、以下の5つの選択肢から回答します
   - `1: はい`
   - `2: たぶんはい`
   - `3: わからない`
   - `4: たぶんいいえ`
   - `5: いいえ`
3. **推測**: システムが確信を持ったら答えを推測します
4. **学習**: 外れた場合は正解と新しい質問を教えることで、システムが学習します

### 操作例

```
質問: それは哺乳類ですか？
1: はい
2: たぶんはい
3: わからない
4: たぶんいいえ
5: いいえ
選択してください (1-5): 1
```

## 💻 必要環境

- **Python**: 3.7以上
- **追加インストール**: 不要（標準ライブラリのみ使用）

## 🏗️ システムの仕組み

### ベイズ推定

各質問の回答を元に、ベイズの定理を用いて各エンティティである確率を更新します。

```
P(エンティティ|回答) ∝ P(回答|エンティティ) × P(エンティティ)
```

### 情報エントロピー

情報理論に基づき、最も多くの情報を得られる質問を選択します。
エントロピーが最も減少する質問を優先的に聞くことで、効率的に推測を絞り込みます。

### 強化学習

正解した場合や新しい知識を学んだ場合、属性値を更新して知識ベースを改善します。
遊べば遊ぶほど、システムの推測精度が向上していきます。

## 📁 ファイル構成

```
.
├── main.py              # ゲームのエントリーポイント
├── engine.py            # 推論エンジン（ベイズ更新・情報エントロピー）
├── knowledge_base.py    # 知識ベースの管理（JSON読み込み・保存）
├── knowledge_base.json  # 知識データ（自動生成・自動更新）
└── README.md            # このファイル
```

### 各ファイルの役割

- **main.py**: ゲームのメインループと対話処理を担当
- **engine.py**: ベイズ推定による確率更新と、情報エントロピーに基づく質問選択を実装
- **knowledge_base.py**: JSONファイルの読み書きとデータ管理
- **knowledge_base.json**: エンティティと質問のデータベース（初回実行時に自動生成）

## 🧠 「遊ぶほど賢くなる」仕組み

1. **初期状態**: 5つの動物（犬、猫、象、ペンギン、金魚）と8つの質問から開始
2. **新規学習**: システムが間違えた場合、以下を学習します
   - 新しいエンティティ（正解として教えられたもの）
   - 新しい質問（それを区別するための質問）
   - 既存のエンティティとの差異
3. **属性更新**: 学習した内容は即座に `knowledge_base.json` に保存
4. **次回以降**: 保存された知識を使って、より正確な推測が可能に

## 🎯 技術的特徴

- **型ヒント**: コードの可読性と保守性を向上
- **日本語コメント**: すべてのコメントは日本語で記述
- **UTF-8対応**: `ensure_ascii=False` による正しい日本語保存
- **標準ライブラリのみ**: `json`, `math`, `os`, `uuid` のみを使用

## 📊 データ構造

### エンティティの属性値

各エンティティは質問に対して -1.0 から 1.0 の属性値を持ちます：

- `1.0`: はい
- `0.5`: たぶんはい
- `0.0`: わからない
- `-0.5`: たぶんいいえ
- `-1.0`: いいえ

### 例

```json
{
  "犬": {
    "q1": 1.0,   // 哺乳類: はい
    "q2": -1.0,  // 飛べる: いいえ
    "q3": 1.0    // ペット: はい
  }
}
```

## 🤝 貢献

このプロジェクトはオープンソースです。改善案や新機能の提案を歓迎します！

## 📜 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

---

楽しんでプレイしてください！ 🎉
